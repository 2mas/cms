!function(t){var e={};function s(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);var r,n,i;s(1);r=jQuery,n=Garnish.Base.extend({$form:null,$loginNameInput:null,$passwordFields:null,$passwordField:null,$passwordInput:null,$forgotPasswordLink:null,$rememberMeCheckbox:null,$sslIcon:null,$submitBtn:null,$spinner:null,$error:null,passwordInputInterval:null,forgotPassword:!1,loading:!1,init:function(){this.$form=r("#login-form"),this.$loginNameInput=r("#loginName"),this.$passwordFields=r("#password-fields"),this.$passwordField=r("#password-field"),this.$passwordInput=r("#password"),this.$forgotPasswordLink=r("#forgot-password"),this.$sslIcon=r("#ssl-icon"),this.$submitBtn=r("#submit"),this.$spinner=r("#spinner"),this.$rememberMeCheckbox=r("#rememberMe"),new Craft.PasswordInput(this.$passwordInput,{onToggleInput:r.proxy((function(t){this.removeListener(this.$passwordInput,"input"),this.$passwordInput=t,this.addListener(this.$passwordInput,"input","validate")}),this)}),this.addListener(this.$loginNameInput,"input","validate"),this.addListener(this.$passwordInput,"input","validate"),this.addListener(this.$forgotPasswordLink,"click","onForgetPassword"),this.addListener(this.$form,"submit","onSubmit"),this.addListener(this.$sslIcon,"mouseover",(function(){this.$sslIcon.hasClass("disabled")||this.$submitBtn.addClass("hover")})),this.addListener(this.$sslIcon,"mouseout",(function(){this.$sslIcon.hasClass("disabled")||this.$submitBtn.removeClass("hover")})),this.addListener(this.$sslIcon,"mousedown",(function(){this.$sslIcon.hasClass("disabled")||(this.$submitBtn.addClass("active"),this.addListener(Garnish.$doc,"mouseup",(function(){this.$submitBtn.removeClass("active"),this.removeListener(Garnish.$doc,"mouseup")})))})),this.passwordInputInterval=setInterval(r.proxy(this,"validate"),250),this.addListener(this.$sslIcon,"click",(function(){this.$submitBtn.trigger("click")}))},validate:function(){return this.$loginNameInput.val()&&(this.forgotPassword||this.$passwordInput.val().length>=6)?(this.$sslIcon.enable(),this.$submitBtn.enable(),!0):(this.$sslIcon.disable(),this.$submitBtn.disable(),!1)},onSubmit:function(t){t.preventDefault(),this.validate()&&(this.$submitBtn.addClass("active"),this.$spinner.removeClass("hidden"),this.loading=!0,this.$error&&this.$error.remove(),this.forgotPassword?this.submitForgotPassword():this.submitLogin())},submitForgotPassword:function(){var t={loginName:this.$loginNameInput.val()};Craft.postActionRequest("users/send-password-reset-email",t,r.proxy((function(t,e){"success"===e&&(t.success?new i:this.showError(t.error)),this.onSubmitResponse()}),this))},submitLogin:function(){var t={loginName:this.$loginNameInput.val(),password:this.$passwordInput.val(),rememberMe:this.$rememberMeCheckbox.prop("checked")?"y":""};return Craft.postActionRequest("users/login",t,r.proxy((function(t,e){"success"===e?t.success?window.location.href=t.returnUrl:(Garnish.shake(this.$form),this.onSubmitResponse(),this.showError(t.error)):this.onSubmitResponse()}),this)),!1},onSubmitResponse:function(){this.$submitBtn.removeClass("active"),this.$spinner.addClass("hidden"),this.loading=!1},showError:function(t){t||(t=Craft.t("app","A server error occurred.")),this.$error=r('<p class="error" style="display:none">'+t+"</p>").insertAfter(r(".buttons",this.$form)),this.$error.velocity("fadeIn")},onForgetPassword:function(t){t.preventDefault(),Garnish.isMobileBrowser()||this.$loginNameInput.trigger("focus"),this.$error&&this.$error.remove(),this.$form.addClass("reset-password"),this.$passwordField.remove(),this.$passwordFields.remove(),this.$submitBtn.addClass("reset-password"),this.$submitBtn.attr("value",Craft.t("app","Reset Password")),this.$submitBtn.enable(),this.$sslIcon.remove(),this.forgotPassword=!0,this.validate()}}),i=Garnish.Modal.extend({init:function(){var t=r('<div class="modal fitted email-sent"><div class="body">'+Craft.t("app","Check your email for instructions to reset your password.")+"</div></div>").appendTo(Garnish.$bod);this.base(t)},hide:function(){}}),new n},function(t,e,s){var r=s(2);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,s(3).default)("562d9a35",r,!1,{})},function(t,e,s){},function(t,e,s){"use strict";function r(t,e){for(var s=[],r={},n=0;n<e.length;n++){var i=e[n],o=i[0],a={id:t+":"+n,css:i[1],media:i[2],sourceMap:i[3]};r[o]?r[o].parts.push(a):s.push(r[o]={id:o,parts:[a]})}return s}s.r(e),s.d(e,"default",(function(){return c}));var n="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},o=n&&(document.head||document.getElementsByTagName("head")[0]),a=null,u=0,d=!1,l=function(){},h=null,p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function c(t,e,s,n){d=s,h=n||{};var o=r(t,e);return f(o),function(e){for(var s=[],n=0;n<o.length;n++){var a=o[n];(u=i[a.id]).refs--,s.push(u)}e?f(o=r(t,e)):o=[];for(n=0;n<s.length;n++){var u;if(0===(u=s[n]).refs){for(var d=0;d<u.parts.length;d++)u.parts[d]();delete i[u.id]}}}}function f(t){for(var e=0;e<t.length;e++){var s=t[e],r=i[s.id];if(r){r.refs++;for(var n=0;n<r.parts.length;n++)r.parts[n](s.parts[n]);for(;n<s.parts.length;n++)r.parts.push(v(s.parts[n]));r.parts.length>s.parts.length&&(r.parts.length=s.parts.length)}else{var o=[];for(n=0;n<s.parts.length;n++)o.push(v(s.parts[n]));i[s.id]={id:s.id,refs:1,parts:o}}}}function m(){var t=document.createElement("style");return t.type="text/css",o.appendChild(t),t}function v(t){var e,s,r=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(r){if(d)return l;r.parentNode.removeChild(r)}if(p){var n=u++;r=a||(a=m()),e=g.bind(null,r,n,!1),s=g.bind(null,r,n,!0)}else r=m(),e=w.bind(null,r),s=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else s()}}var $,b=($=[],function(t,e){return $[t]=e,$.filter(Boolean).join("\n")});function g(t,e,s,r){var n=s?"":r.css;if(t.styleSheet)t.styleSheet.cssText=b(e,n);else{var i=document.createTextNode(n),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(i,o[e]):t.appendChild(i)}}function w(t,e){var s=e.css,r=e.media,n=e.sourceMap;if(r&&t.setAttribute("media",r),h.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),n&&(s+="\n/*# sourceURL="+n.sources[0]+" */",s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),t.styleSheet)t.styleSheet.cssText=s;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(s))}}}]);
//# sourceMappingURL=login.min.js.map